{
  "title": "iterations_txt",
  "content": "# iterations.txt\n\nContent-Type: text/x-zim-wiki\nWiki-Format: zim 0.6\nCreation-Date: 2024-07-23T15:15:21-07:00\n\n====== iterations.txt ======\nTo add more states to the running method, we need to modify the existing code. We can add a new variable called \"sprintMomentum\" to keep track of the current momentum level. We can also add four new variables to store the maximum momentum levels for each stage. Here's the modified code:\r\n\r\n\r\n[SerializeField] private float[] sprintMomentumThresholds = { 0f, 2f, 4f, 6f };\r\n[SerializeField] private float[] sprintSpeeds = { 6f, 7f, 8f, 9f };\r\nprivate int sprintMomentum = 0;\r\n\r\n\r\nNext, we need to modify the code that handles sprinting. Instead of just setting the \"isSprinting\" flag, we need to update the \"sprintMomentum\" variable based on how long the player has been holding down the sprint key. We can use the \"Time.time\" variable to calculate the sprint duration. Here's the modified code:\r\n\r\n\r\nif (Input.GetKey(sprintKey))\r\n{\r\n\tsprintMomentum = Mathf.Min(sprintMomentum + 1, sprintMomentumThresholds.Length - 1);\r\n}\r\nelse\r\n{\r\n\tsprintMomentum = 0;\r\n}\r\n\r\n\r\nFinally, we need to modify the code that moves the character. We can use the \"sprintMomentum\" variable to determine the current sprint speed. We can also update the animation based on the current sprint momentum level. Here's the modified code:\r\n\r\n\r\nif (direction.magnitude >= 0.1f)\r\n{\r\n\tfloat targetAngle = Mathf.Atan2(direction.x, direction.z) * Mathf.Rad2Deg;\r\n\ttransform.rotation = Quaternion.Euler(0f, targetAngle, 0f);\r\n\tif (isCrouching)\r\n\t{\r\n\t\tcontroller.Move(direction * crouchSpeed * Time.deltaTime);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tfloat currentSpeed = isSprinting ? sprintSpeeds[sprintMomentum] : speed;\r\n\t\tcontroller.Move(direction * currentSpeed * Time.deltaTime);\r\n\t\t// Update animation\r\n\t\tfloat sprintProgress = (float)sprintMomentum / (float)(sprintMomentumThresholds.Length - 1);\r\n\t\tfloat animationSpeed = Mathf.Lerp(1f, 2f, sprintProgress);\r\n\t\t// Update animation speed\r\n\t}\r\n}\r\n\r\n\r\nThis code should add the ability to sprint with increasing speed based on how long the player holds down the sprint key. The animation should also update to reflect the current sprint momentum level.\r\n\r\n\r\n1.Implement a crouch feature:\r\n-Add a new serialized float variable called \"crouchSpeed\" to control the speed of the crouch movement.\r\n- Add a new serialized float variable called \"crouchHeight\" to control the height of the character when crouching.\r\n- Add a new serialized KeyCode variable called \"crouchKey\" to set the key for crouching.\r\n- Add a new bool variable called \"isCrouching\" to track whether the character is crouching or not.\r\n- Modify the \"Update\" method to check if the crouch key is pressed and set the \"isCrouching\" variable accordingly.\r\n- Modify the \"Move character\" section to reduce the speed to \"crouchSpeed\" if the character is crouching.\r\n- Modify the \"Apply motion\" section to set the character's height to \"crouchHeight\" if the character is crouching.\r\n\r\n2. Implement a sprint feature:\r\n-Add a new serialized float variable called \"sprintSpeed\" to control the speed of the sprint movement.\r\n- Add a new serialized KeyCode variable called \"sprintKey\" to set the key for sprinting.\r\n- Add a new bool variable called \"isSprinting\" to track whether the character is sprinting or not.\r\n- Modify the \"Update\" method to check if the sprint key is pressed and set the \"isSprinting\" variable accordingly.\r\n- Modify the \"Move character\" section to increase the speed to \"sprintSpeed\" if the character is sprinting.\r\n\r\n3. Implement a camera rotation feature:\r\n-Add a new serialized Transform variable called \"cameraTransform\" to reference the camera transform.\r\n- Add a new serialized float variable called \"lookSpeed\" to control the speed of the camera rotation.\r\n- Modify the \"Update\" method to get the mouse input and rotate the camera transform accordingly using \"lookSpeed\".\r\n\r\nHere is the modified code:\r\n\r\nusing System.Collections;\r\nusing System.Collections.Generic;\r\nusing UnityEngine;\r\n\r\npublic class PlayerController : MonoBehaviour\r\n{\r\n\t[SerializeField] private CharacterController controller;\r\n\t[SerializeField] private float speed = 6f;\r\n\t[SerializeField] private float jumpForce = 10f;\r\n\t[SerializeField] private float jumpDelay = 0.1f;\r\n\t[SerializeField] private LayerMask groundMask;\r\n\t[SerializeField] private float crouchSpeed = 3f;\r\n\t[SerializeField] private float crouchHeight = 1f;\r\n\t[SerializeField] private KeyCode crouchKey = KeyCode.LeftControl;\r\n\t[SerializeField] private float sprintSpeed = 9f;\r\n\t[SerializeField] private KeyCode sprintKey = KeyCode.LeftShift;\r\n\t[SerializeField] private Transform cameraTransform;\r\n\t[SerializeField] private float lookSpeed = 3f;\r\n\r\n\tprivate Vector3 motion;\r\n\tprivate bool isGrounded;\r\n\tprivate float lastJumpTime;\r\n\tprivate bool isCrouching;\r\n\tprivate bool isSprinting;\r\n\r\n\tpublic static CursorLockMode lockState { get; set; }\r\n\tpublic static bool visible { get; set; }\r\n\r\n\tprivate void Update()\r\n\t{\r\n\t\t// Get input\r\n\t\tfloat moveHorizontal = Input.GetAxis(\"Horizontal\");\r\n\t\tfloat moveVertical = Input.GetAxis(\"Vertical\");\r\n\t\tVector3 moveDirection = new Vector3(moveHorizontal, 0.0f, moveVertical);\r\n\r\n\t\t// Handle jump\r\n\t\tisGrounded = Physics.CheckSphere(transform.position, controller.radius, groundMask);\r\n\t\tif (Input.GetButtonDown(\"Jump\") && Time.time >= lastJumpTime + jumpDelay && isGrounded)\r\n\t\t{\r\n\t\t\tmotion.y = jumpForce;\r\n\t\t\tlastJumpTime = Time.time;\r\n\t\t}\r\n\r\n\t\t// Handle crouch\r\n\t\tif (Input.GetKeyDown(crouchKey))\r\n\t\t{\r\n\t\t\tisCrouching = !isCrouching;\r\n\t\t}\r\n\r\n\t\t// Handle sprint\r\n\t\tif (Input.GetKey(sprintKey))\r\n\t\t{\r\n\t\t\tisSprinting = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tisSprinting = false;\r\n\t\t}\r\n\r\n\t\t// Move character\r\n\t\tVector3 direction = moveDirection.normalized;\r\n\t\tif (direction.magnitude >= 0.1f)\r\n\t\t{\r\n\t\t\tfloat targetAngle = Mathf.Atan2(direction.x, direction.z) * Mathf.Rad2Deg;\r\n\t\t\ttransform.rotation = Quaternion.Euler(0f, targetAngle, 0f);\r\n\t\t\tif (isCrouching)\r\n\t\t\t{\r\n\t\t\t\tcontroller.Move(direction * crouchSpeed * Time.deltaTime);\r\n\t\t\t}\r\n\t\t\telse if (isSprinting)\r\n\t\t\t{\r\n\t\t\t\tcontroller.Move(direction * sprintSpeed * Time.deltaTime);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcontroller.Move(direction * speed * Time.deltaTime);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Apply gravity\r\n\t\tif (!isGrounded)\r\n\t\t{\r\n\t\t\tmotion.y -= 9.81f * Time.deltaTime;\r\n\t\t}\r\n\r\n\t\t// Apply motion\r\n\t\tif (isCrouching)\r\n\t\t{\r\n\t\t\tcontroller.height = crouchHeight;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcontroller.height = 2f;\r\n\t\t}\r\n\t\tcontroller.Move(motion * Time.deltaTime);\r\n\r\n\t\t// Reset motion\r\n\t\tif (isGrounded && motion.y < 0f)\r\n\t\t{\r\n\t\t\tmotion.y = -2f;\r\n\t\t}\r\n\r\n\t\t// Unlock cursor\r\n\t\tif (Input.GetKeyDown(KeyCode.Escape))\r\n\t\t{\r\n\t\t\tCursor.lockState = CursorLockMode.None;\r\n\t\t\tCursor.visible = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCursor.lockState = CursorLockMode.Locked;\r\n\t\t\tCursor.visible = false;\r\n\t\t}\r\n\r\n\t\t// Handle camera rotation\r\n\t\tfloat mouseX = Input.GetAxis(\"Mouse X\") * lookSpeed;\r\n\t\tfloat mouseY = Input.GetAxis(\"Mouse Y\") * lookSpeed;\r\n\t\ttransform.Rotate(Vector3.up, mouseX);\r\n\t\tcameraTransform.Rotate(Vector3.right, -mouseY);\r\n\t}\r\n}\n\n\n## Metadata\n- **Source**: All of it Anything Everything At Once/iterations.txt.txt\n- **Type**: document\n- **Tags**: document, All_of_it_Anything_Everything_At_Once, character-design, feature\n- **Imported**: 2025-05-05T16:25:37.142Z",
  "source": {
    "type": "notebook",
    "path": "All of it Anything Everything At Once/iterations.txt.txt",
    "importedAt": "2025-05-05T16:25:37.142Z"
  },
  "created": "2025-05-05T16:25:37.142Z",
  "modified": "2025-05-05T16:25:37.142Z",
  "tags": [
    "document",
    "All_of_it_Anything_Everything_At_Once",
    "character-design",
    "feature"
  ]
}